<div class="infinite-text-loop-wrapper">
  <div class="infinite-text-content">
    {%- if section.settings.text1 != blank -%}
    {% liquid
        assign text1 = section.settings.text1 | split: ' ' | split: ',' | split: '-' | split: '.'
        assign count = 1
        if text1.size < 5
          assign count = 10
        elsif text1.size > 4 and text1.size < 10
          assign count = 8
        elsif text1.size > 9 and text1.size < 15
          assign count = 6
        elsif text1.size > 14 and text1.size < 20
          assign count = 4
        elsif text1.size > 19 and text1.size < 25
          assign count = 2
      endif 
    %}
    <p class="infinite-text text-loop-left" style="color:{{ section.settings.text1color }}">
      {% for i in (1..count) %}
      {{ section.settings.text1 }}
      {% endfor %}
    </p>
    {% endif %}
    {% if section.settings.text2 != blank %}
    {% liquid
      assign text2 = section.settings.text1 | split: ' ' | split: ',' | split: '-' | split: '.'
      assign count = 1
      if text2.size < 5
        assign count = 10
      elsif text2.size > 4 and text2.size < 10
        assign count = 8
      elsif text2.size > 9 and text2.size < 15
        assign count = 6
      elsif text2.size > 14 and text2.size < 20
        assign count = 4
      elsif text2.size > 19 and text2.size < 25
        assign count = 2
    endif 
  %}
    <p class="infinite-text text-loop-right" style="color:{{ section.settings.text2color }}">
    {% for i in (1..count) %}
      {{ section.settings.text2 }}
      {% endfor %}
    </p>
    {% endif %}
  </div>
</div>
<style>
  #shopify-section-{{ section.id }}.shopify-section {
    background-color:{{ section.settings.bgcolor }};
    padding-top:{{ section.settings.top_space_desktop }}px;
    padding-bottom:{{ section.settings.bottom_space_desktop }}px;
  }
  @media only screen and (max-width:575px) {
    #shopify-section-{{ section.id }}.shopify-section{
      padding-top:{{ section.settings.top_space_mobile }}px;
      padding-bottom:{{ section.settings.bottom_space_mobile }}px;
    }
  }
</style>
{% schema %}
{
  "name": "t:sections.rotating-text.name",
  "class": "infinite-text-loop",
  "settings": [
    {
      "type":"header",
      "content": "t:common.header.text_section.label"
    },
    {
      "type": "textarea",
      "id": "text1",
      "label": "t:sections.rotating-text.settings.text1.label",
      "default": "    Add promotional text here    "
    },
    {
      "type": "textarea",
      "id": "text2",
      "label": "t:sections.rotating-text.settings.text2.label",
      "default": "    Add promotional text here    "
    },
    {
      "type":"header",
      "content": "t:common.header.color_section.label"
    },
    {
      "type": "color",
      "id": "bgcolor",
      "label": "t:sections.rotating-text.settings.bgcolor.label",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text1color",
      "label": "t:sections.rotating-text.settings.text1color.label",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text2color",
      "label": "t:sections.rotating-text.settings.text2color.label",
      "default": "#a56748"
    },
    {
      "type":"header",
      "content": "t:common.header.space_section.label"
    },
    {
      "type": "range",
      "id": "top_space_desktop",
      "label": "t:common.top_space_desktop.label",
      "default": 15,
      "min": 0,
      "max": 50,
      "step": 5
    },
    {
      "type": "range",
      "id": "bottom_space_desktop",
      "label": "t:common.bottom_space_desktop.label",
      "default": 15,
      "min": 0,
      "max": 50,
      "step": 5
    },
    {
      "type": "range",
      "id": "top_space_mobile",
      "label": "t:common.top_space_mobile.label",
      "default": 15,
      "min": 0,
      "max": 50,
      "step": 5
    },
    {
      "type": "range",
      "id": "bottom_space_mobile",
      "label": "t:common.bottom_space_mobile.label",
      "default": 15,
      "min": 0,
      "max": 50,
      "step": 5
    }
  ],
  "presets": [
    {
      "name": "t:sections.rotating-text.presets.name"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}

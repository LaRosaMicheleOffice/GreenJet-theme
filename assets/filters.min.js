function changeGridLayout(){let b=document.getElementById("CollectionProductsContainer"),c=document.querySelectorAll(".sort-grid-icon");Array.from(c).forEach(function(a){a.classList.remove("active")});var a=Cookies.get("grid_layout_collection");b&&c.length>0&&(window.innerWidth<768?a&&"grid-layout-4"!=a&&"grid-layout-5"!=a?(document.querySelector('.sort-grid-icon[data-value="'+a+'"]').classList.add("active"),b.setAttribute("data-view",a)):(document.querySelector('.sort-grid-icon[data-value="grid-layout-2"]').classList.add("active"),b.setAttribute("data-view","grid-layout-2")):window.innerWidth>=768&&window.innerWidth<992?a&&"grid-layout-4"!=a&&"grid-layout-5"!=a?(document.querySelector('.sort-grid-icon[data-value="'+a+'"]').classList.add("active"),b.setAttribute("data-view",a)):(document.querySelector('.sort-grid-icon[data-value="grid-layout-3"]').classList.add("active"),b.setAttribute("data-view","grid-layout-3")):window.innerWidth>=992&&(a?(document.querySelector('.sort-grid-icon[data-value="'+a+'"]').classList.add("active"),b.setAttribute("data-view",a)):(document.querySelector('.sort-grid-icon[data-value="grid-layout-4"]').classList.add("active"),b.setAttribute("data-view","grid-layout-4"))),updateGridView(b))}function hideShowFilters(){var a=document.getElementById("filterHeading"),c=document.getElementById("filterSideBar");if(window.innerWidth<768){a&&a.addEventListener("click",()=>{c.classList.add("active"),document.querySelector("body").classList.add("open-filter-sort")});var b=document.getElementById("cancelFilters");b&&b.addEventListener("click",()=>{c.classList.remove("active"),document.querySelector("body").classList.remove("open-filter-sort")})}}function showMoreFilters(){let b=document.getElementById("FiltersForm");var a=b.querySelectorAll(".filters-expand");a&&Array.from(a).forEach(function(a){a.addEventListener("click",b=>{b.preventDefault(),a.classList.contains("active")?(a.classList.remove("active"),DOMAnimations.slideUp(a.parentNode.querySelector(".more-options"),150),a.querySelector("span").textContent=showMoreText):(a.classList.add("active"),DOMAnimations.slideDown(a.parentNode.querySelector(".more-options"),150),a.querySelector("span").textContent=showLessText)})})}function applyFilters(){var b=document.getElementById("CollectionProductsContainer");if(b){var c=b.closest(".shopify-section"),i=b.dataset.id;let a=document.getElementById("FiltersForm");if(!a)return!1;var d=c.querySelectorAll(".sort-grid-icon");Array.from(d).forEach(function(a){a.addEventListener("click",f=>{if(f.preventDefault(),!a.classList.contains("active")){a.classList.add("active"),Array.from(d).forEach(function(b){b!=a&&b.classList.remove("active")});var e=a.dataset.value;b.setAttribute("data-view",e),updateGridView(b);var c=new Date;c.setTime(c.getTime()+parseInt(864e5)),Cookies.set("grid_layout_collection",e,{expires:c,path:"/"});let g=b.querySelectorAll(".lazyloaded");Array.from(g).forEach(function(a){a.classList.remove("lazyloaded"),a.classList.add("lazyload")})}})});var e=a.querySelectorAll(".mall-slider-handles");if(Array.from(e).forEach(function(d){var a=d,c="";c=a.noUiSlider?a.noUiSlider:noUiSlider.create(a,{start:[a.dataset.start,a.dataset.end],step:10,connect:!0,tooltips:!1,range:{min:[parseInt(a.dataset.min)],max:[parseInt(a.dataset.max)]}}),window.innerWidth>767&&c.on("change",function(a){var f=$(this)[0].options.range.min,g=$(this)[0].options.range.max,c=parseInt(a[0]);moneyFormat,c>f&&(b.querySelectorAll('input[name="filter.v.price.gte"]')[0].value=c);var e=parseInt(a[1]);e<g&&(b.querySelectorAll('input[name="filter.v.price.lte"]')[0].value=e),getFilterData(d,i)}),c.on("update",function(a){var e=$(this)[0].options.range.min,f=$(this)[0].options.range.max,c=parseInt(a[0]),d=parseInt(a[1]);c>e&&(b.querySelectorAll('input[name="filter.v.price.gte"]')[0].value=c),d<f&&(b.querySelectorAll('input[name="filter.v.price.lte"]')[0].value=d)})}),window.innerWidth>767){var f=a.querySelectorAll("input[type=number]");Array.from(f).forEach(function(a){a.addEventListener("change",()=>{getFilterData(a,i)})});var g=a.querySelectorAll("input[type=checkbox]");Array.from(g).forEach(function(a){a.addEventListener("click",()=>{getFilterData(a,i)})})}else a.addEventListener("submit",b=>{b.preventDefault(),getFilterData(a,i)});var h=b.querySelectorAll("a.yv-applied-filter-remove");Array.from(h).forEach(function(a){a.addEventListener("click",b=>{b.preventDefault();var c=a.getAttribute("href");getFilterData(a,i,c)})})}}function sortByOptions(){var a=document.getElementById("CollectionProductsContainer"),b=document.querySelectorAll('[name="sort_by"]'),c=a.dataset.id;Array.from(b).forEach(function(a){a.addEventListener("change",e=>{e.preventDefault(),Array.from(b).forEach(function(a){a.parentNode.classList.remove("selected")}),a.parentNode.classList.add("selected");var d=document.getElementById("sort__list");d.classList.contains("active")&&(d.classList.remove("active"),window.innerWidth>767?DOMAnimations.slideUp(d):document.querySelector("body").classList.remove("open-filter-sort")),document.querySelector("body").classList.remove("open-filter-sort"),getFilterData(a,c)})})}function sortBy(){var a=document.querySelector(".collection-sortby-selected");a&&a.addEventListener("click",b=>{b.preventDefault();var a=document.getElementById("sort__list");a.classList.contains("active")?(a.classList.remove("active"),window.innerWidth>767?DOMAnimations.slideUp(a):document.querySelector("body").classList.remove("open-filter-sort")):(a.classList.add("active"),window.innerWidth>767?DOMAnimations.slideDown(a):document.querySelector("body").classList.add("open-filter-sort"))});var b=document.querySelector(".close-sort");b&&b.addEventListener("click",a=>{a.preventDefault();var b=document.getElementById("sort__list");window.innerWidth<768&&(b.classList.remove("active"),document.querySelector("body").classList.remove("open-filter-sort"))})}function updateGridView(a){if(a){var c=document.getElementById("CollectionProductsContainer").getAttribute("data-view"),b=a.querySelectorAll("[data-product-grid]");b.length>0&&Array.from(b).forEach(function(a){"grid-layout-2"==c?a.setAttribute("class",layout2):"grid-layout-3"==c?a.setAttribute("class",layout3):"grid-layout-4"==c?a.setAttribute("class",layout4):"grid-layout-5"==c&&a.setAttribute("class",layout5)})}}function fetchFilterData(a){return fetch(a).then(a=>a.text())}function getFilterData(i,e,a){let f=document.getElementById("FiltersForm"),g=new FormData(f);var b=new URLSearchParams(g).toString(),c=document.getElementById("yv-applied-filter-cross-all");c&&c.remove();var d=window.location.pathname+"?section_id="+e+"&"+b,h=window.location.pathname+"?"+b;a&&(d=a,h=a),fetchFilterData(d).then(m=>{let a=(new DOMParser).parseFromString(m,"text/html");var f=a.querySelector(".products-count"),g="";a.getElementById("toolbox-sort")&&(g=a.getElementById("toolbox-sort").innerHTML);var d=a.getElementById("CollectionProductsContainer"),j=a.getElementById("yv-applied-filter-cross-all");j&&(document.getElementById("yv-applied-filter-cross-all")||document.querySelector(".yv-filter-sidebar-heading").appendChild(j));var b=document.getElementById("CollectionProductsContainer");if(updateGridView(d),d)b.innerHTML=d.innerHTML;else{let k=b.querySelector("[data-collection-products]");k&&(k.innerHTML=noResultFound)}let n=i.getAttribute("id"),c=document.getElementById(n);if(c){c.focus();let l=c.closest(".more-options");if(l){l.style.display="block";let e=c.closest(".yv-filter-content").querySelector(".filters-expand");e&&(e.classList.add("active"),e.querySelector("span").innerHTML=showLessText)}}f&&(document.querySelector(".products-count").innerHTML=f.innerHTML),document.getElementById("toolbox-sort")&&(document.getElementById("toolbox-sort").innerHTML=g),sortBy(),applyFilters(),showMoreFilters(),hideShowFilters(),"sort_by"!=i.getAttribute("name")&&b.closest(".yv-collection-container")&&b.closest(".yv-collection-container").scrollIntoView({top:150,behavior:"smooth"}),history.pushState({},null,h)})}function ScrollExecute(){var a=$("#more").last(),b=a.find("a").attr("href");screenVisibility(a)&&0==triggered&&(triggered=!0,$.ajax({url:b,type:"GET",beforeSend:function(){a.find(".load").removeClass("hidden")}}).done(function(c){a.remove();var b=document.createElement("div");b.innerHTML=$(c).find("#CollectionProductsContainer").html(),updateGridView(b),$("[data-collection-products]").append(b.querySelector("[data-collection-products]").innerHTML),productVariants(),triggered=!1}))}var layout2="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6",layout3="col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4",layout4="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-3",layout5="col-6 col-sm-6 col-md-3 col-lg-3 col-xl-2";window.addEventListener("load",a=>{changeGridLayout(),hideShowFilters(),applyFilters(),sortByOptions(),showMoreFilters(),sortBy()}),window.addEventListener("resize",function(b){changeGridLayout(),applyFilters();var a=document.getElementById("filterSideBar");a&&window.innerWidth<768&&window.innerWidth>760&&(a.style.display="none",setTimeout(function(){a.style.display=""},500))});let triggered=!1;$(document).ready(function(){$(window).scroll(function(){ScrollExecute()})})